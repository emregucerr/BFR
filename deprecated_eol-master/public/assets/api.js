$(document).ready(function(){$("#api_test_form").submit(function(){return url=$("#api_test_form").attr("action")+"?"+$("#api_test_form").serialize(),url=url.replace(/\?id=(.*?)(\&|$)/,"/$1?"),url=url.replace(/\?(.*)format=(xml|json)$/,".$2?$1"),url=url.replace(/(\?|\&){1,2}$/,""),$.ajax({url:url,type:"GET",dataType:"text",beforeSend:function(){$("#api_test_url").fadeTo(100,.3),$("#api_test_result").fadeTo(100,.3)},error:function(t,e){$("#api_test_result").html("<p>Sorry, there was an error: "+e+"</p>")},complete:function(){$("#api_test_result").fadeTo(100,1)},success:function(t){$("#api_test_url").html("<strong>URL:</strong> "+url),$("#api_test_url").fadeTo(100,1),EOL.ajax_submit(null,{url:"/api/render_test_response",update:$("#api_test_result"),data:{code:t,format:"js"}})}}),!1})});