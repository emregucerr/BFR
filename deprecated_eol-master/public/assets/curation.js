EOL||(EOL={}),EOL.Curation||(EOL.Curation={}),EOL.Curation.form_is_valid=function(e){var t=$("#"+e.data("data-object-id")+"_vetted_id_"+EOL.Curation.UNTRUSTED_ID).is(":checked"),i=""===e.find(".curation-comment-box").val(),n=""===e.find(".untrust_reason:checked").siblings().map(function(){return this.innerHTML}).get();return t?!(i&&n):!0},EOL.Curation.update_icons=function(e,t){$("ul[data-data-object-id="+e+"] li.invisible_icon").hide(),$("ul[data-data-object-id="+e+"] li.inappropriate_icon").hide(),t==EOL.Curation.INVISIBLE_ID?$("ul[data-data-object-id="+e+"] li.invisible_icon").css({display:"inline-block"}):t==EOL.Curation.INAPPROPRIATE_ID&&$("ul[data-data-object-id="+e+"] li.inappropriate_icon").css({display:"inline-block"})},EOL.Curation.post_curate_image=function(e,t){var i=e[0],n=e[1],o=e[2],s=EOL.Curation.vetted_type[o];if("species_page"==t)EOL.Curation.update_icons(i,n),EOL.toggle_main_img_icons(i),thumbnail=$("#thumbnails a#thumb-"+i),image_wrap=$("#image-"+i),notes=$("#mc-notes-"+i),classes="trusted unknown untrusted unknown-text untrusted-text trusted-text",thumbnail.removeClass(classes).addClass(s),image_wrap.removeClass(classes).addClass(s),notes.removeClass(classes).addClass(s+"-text");else{var a=$("#"+i+"_vetted_id_"+o),r=$("#undo-move-"+i);a.parents("td").removeClass("unknown untrusted trusted").addClass(s),a.parents("td").siblings("td").removeClass("unknown untrusted trusted").addClass(s),r.removeClass("unknown untrusted trusted").addClass(s)}},EOL.Curation.post_curate_text=function(e,t){var i=e[0],n=e[1],o=e[2];"species_page"==t&&($("div#text_buttons_"+i+" div.trust_button").remove(),$("div#text_buttons_"+i+" div.untrust_button").remove(),$("#text_"+i).removeClass("untrusted unknown trusted"),o==EOL.Curation.UNTRUSTED_ID?$("#text_"+i).addClass("untrusted"):o==EOL.Curation.UNKNOWN_ID&&$("#text_"+i).addClass("unknown"),EOL.Curation.update_icons(i,n))},$(document).ready(function(){$('form.curation_form input[type="submit"]').on("click",function(){var e=$(this).closest("form"),t=e.data("page_type");return e.find("div.processing").show(),submit=e.find(":submit"),the_comment=e.find("textarea"),$.ajax({url:e.attr("action"),type:"PUT",dataType:"json",beforeSend:function(t){return EOL.Curation.form_is_valid(e)?(t.setRequestHeader("Accept","text/javascript"),submit.attr("disabled","disabled"),the_comment.attr("disabled","disabled"),void 0):(e.find(".untrust_reason").parent().parent().find("b").show().css("color","red"),e.find("div.processing").fadeOut(),!1)},complete:function(){submit.attr("disabled",""),the_comment.attr("disabled",""),e.find("div.processing").fadeOut(),e.find(".untrust_reason").parent().parent().find("b").show().css("color","black")},success:function(i){$("#comment_button_link_"+i.args[0]+" .span_block").html(i.args[4]),(e.find(".reason").siblings("input").attr("checked")||the_comment.val())&&$("#comment_button_link_"+i.args[0]).click(),the_comment.val(""),"text"==i.type?EOL.Curation.post_curate_text(i.args,t):EOL.Curation.post_curate_image(i.args,t)},data:$(e).serialize()}),!1}),$('div.vetted .untrust input[type="radio"]').on("click",function(){$(this).parent().find(".untrust_reason").parent().parent().find("b").show().css("color","black"),$(this).parent().find("div.reason").slideDown()}),$('div.vetted .trust input[type="radio"]').on("click",function(){$(this).parent().parent().find("div.reason").slideUp()}),$('div.vetted .unreviewed input[type="radio"]').on("click",function(){$(this).parent().parent().find("div.reason").slideUp()}),$("form.curation .cancel-button").on("click",function(){$(this).closest("div.overlay, div.text-slidebox-container").find("a.close, a.close-button").click()}),$("div.text_curation_close a.close-button").on("click",function(){$(this).parent().parent().parent().slideUp()}),$("td.show_all input").on("click",function(e){var t=$("#show_other_classifications");window.location=t.attr("href")+"&split_hierarchy_entry_id[]="+$(e.target).val(),$("div.main_container").children().fadeOut(function(){$("#please_wait").fadeIn()})}),$("th.check_all:not(:has(input))").append('<input class="check_all_from_header" type="checkbox"/>'),$("input.check_all_from_header").on("click",function(e){$(e.target).closest("table").find("td input[type=checkbox]").attr("checked",$(e.target).is(":checked"))})});