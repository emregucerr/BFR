function intialize_attribute_list(){$("input.textbox-text").attr("placeholder","translation missing: en.helpers.label.data_search.attribute"),$("#_easyui_combobox_i1_0").remove()}$(document).ready(function(){$("#taxon_name_id, #autocomplete_q").bind("change",function(){$.ajax({url:"/data_search/update_attributes",dataType:"script"})}),intialize_attribute_list()}),function(t){"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),t.fn.fadeInline=function(e){var n={duration:200,display:"inline-block"},i=t.extend(n,e);return this.each(function(){t(this).css({opacity:0,display:i.display}).fadeTo(i.duration,1)})},t.fn.summarizeInput=function(e){var n={truncate:0,panel:t(this),container:t("<p/>",{"class":"summarize_input"}),wrapper:t("<span/>"),exclude:{}},i=t.extend(n,e);return this.each(function(){var e=t(this).find("label"),n=t(this).find(":input"),o=[];if(output="",n.each(function(){var n=this.name,a=t.grep(e,function(e){return t(e).attr("for")==n})[0],r="select-one"==this.type?t(this.selectedOptions).text():this.value,s="undefined"!=typeof i.exclude[n]&&(0===i.exclude[n].length||0===t.inArray(this.value,i.exclude[n]));r&&!s&&o.push([t(a).text(),i.truncate>0&&r.length>i.truncate?r.substr(0,i.truncate)+"â€¦":r])}),o.length>0){for(var a in o)o[a]=o[a].join(": ");i.wrapper.text(o.join("; ")).appendTo(i.container),i.container.hide().appendTo(i.panel).fadeIn(500)}})},t(function(){!function(e){function n(){for(var t in a)a[t].is(":disabled")?a[t].attr("placeholder")!=s[t]&&a[t].attr("placeholder",s[t]):a[t].attr("placeholder")!=a[t].data("placeholder")&&a[t].attr("placeholder",a[t].data("placeholder"))}function i(t){t.stopImmediatePropagation(),a.min.prop("disabled",a.q.val().trim()),a.max.prop("disabled",a.q.val().trim()),r.prop("disabled",a.q.val().trim()),a.q.prop("disabled",a.min.val().trim()||a.max.val().trim()),a.min.is(":disabled")&&a.max.is(":disabled")&&a.q.is(":disabled")&&a.q(":disabled",!1),n()}var o=e.find(".vital"),a={q:e.find('input[name="q"]'),min:e.find('input[name="min"]'),max:e.find('input[name="max"]')},r=e.find('select[name="unit"]'),s={q:a.q.data("disabled-placeholder"),min:a.min.data("disabled-placeholder"),max:a.max.data("disabled-placeholder")},l=e.find('input[name="taxon_name"]'),d={taxonName:l.data("value-removed-placeholder")};t("<fieldset/>",{"class":"prominent_actions",html:t("<legend/>",{"class":"assistive",text:"Additional search submit"})}).append(e.find('#traitbank_search input[type="submit"]').clone().attr("title","Search now or move on to add more search criteria")).appendTo(o),"string"==typeof d.taxonName&&d.taxonName.length>0&&(l.data("placeholder",l.attr("placeholder")),l.attr("placeholder",d.taxonName),l.one("keyup input paste",function(){l.attr("placeholder",l.data("placeholder"))}));for(var c in a)a[c].data("placeholder",a[c].attr("placeholder")),a[c].on("keyup input paste",{n:c},i),a[c].keyup();if(e.data("results-total")>0){var u=e.find(".extras"),h=e.find("fieldset.actions"),f=t("<a/>",{href:"#"}),p={truncate:50,panel:o,container:t("<dl/>",{"class":"summarize_input"}).append(t("<dt/>").append(u.data("summary-intro"))),wrapper:t("<dd/>"),exclude:{sort:[]}};f.hide().appendTo(o),adjustSummarizeExclude=function(){a.min.val().trim()||a.max.val().trim()?"undefined"!=typeof p.exclude.unit&&delete p.exclude.unit:p.exclude.unit=[]},hide=function(){h.fadeOut(200),adjustSummarizeExclude(),u.slideUp(500,function(){f.fadeOut(200,function(){t(this).text(u.data("show")).fadeInline()})}).summarizeInput(p)},show=function(){u.slideDown(500,function(){f.fadeOut(200,function(){t(this).text(u.data("hide")).fadeInline()}),p.container.fadeOut(500,function(){p.wrapper.remove(),t(this).detach()})}),h.fadeIn(500)},t.each([f,p.container.find("a")],function(t,e){e.accessibleClick(function(){return u.is(":visible")?hide():show(),!1})}),hide()}}(t("#data_search")),limit_search_summaries()})}(jQuery);var limit_search_summaries=function(){var t=$(".search_summary:has(ul.values)");if(t.find("li").length>9){t.find("li:gt(8)").slideUp(500);var e=t.find("li").length-9,n="Show "+e+" more",i=$('<a href="#">').text(n);i.on("click",function(e){e.preventDefault(),"true"===$(this).attr("data-open")?t.find("li:gt(8)").slideUp(500,function(){i.text(n),i.attr("data-open","false")}):t.find("li:gt(8)").slideDown(500,function(){i.text("Hide"),i.attr("data-open","true")})}),t.append($('<span class="more"></span>').append(i))}};