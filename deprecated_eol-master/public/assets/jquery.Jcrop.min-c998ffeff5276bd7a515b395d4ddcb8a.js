/**
 * jquery.Jcrop.min.js v0.9.10 (build:20120429)
 * jQuery Image Cropping Plugin - released under MIT License
 * Copyright (c) 2008-2012 Tapmodo Interactive LLC
 * https://github.com/tapmodo/Jcrop
 */
!function(t){t.Jcrop=function(e,i){function n(t){return t+"px"}function s(t){return M.baseClass+"-"+t}function o(){return t.fx.step.hasOwnProperty("backgroundColor")}function a(e){var i=t(e).offset(),n=$("body").outerHeight()-$("body").innerHeight();return[i.left,i.top+n]}function r(t){return[t.pageX-H[0],t.pageY-H[1]]}function l(e){"object"!=typeof e&&(e={}),M=t.extend(M,e),t.each(["onChange","onSelect","onRelease","onDblClick"],function(t,e){"function"!=typeof M[e]&&(M[e]=function(){})})}function c(t,e){if(H=a(B),me.setCursor("move"===t?t:t+"-resize"),"move"===t)return me.activateHandlers(h(e),g);var i=de.getFixed(),n=d(t),s=de.getCorner(d(n));de.setPressed(de.getCorner(n)),de.setCurrent(s),me.activateHandlers(u(t,i),g)}function u(t,e){return function(i){if(M.aspectRatio)switch(t){case"e":i[1]=e.y+1;break;case"w":i[1]=e.y+1;break;case"n":i[0]=e.x+1;break;case"s":i[0]=e.x+1}else switch(t){case"e":i[1]=e.y2;break;case"w":i[1]=e.y2;break;case"n":i[0]=e.x2;break;case"s":i[0]=e.x2}de.setCurrent(i),fe.update()}}function h(t){var e=t;return ge.watchKeys(),function(t){de.moveOffset([t[0]-e[0],t[1]-e[1]]),e=t,fe.update()}}function d(t){switch(t){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function p(t){return function(e){return M.disabled?!1:"move"!==t||M.allowMove?(H=a(B),se=!0,c(t,r(e)),e.stopPropagation(),e.preventDefault(),!1):!1}}function f(t,e,i){var n=t.width(),s=t.height();n>e&&e>0&&(n=e,s=e/t.width()*t.height()),s>i&&i>0&&(s=i,n=i/t.height()*t.width()),ie=t.width()/n,ne=t.height()/s,t.width(n).height(s)}function m(t){return{x:t.x*ie,y:t.y*ne,x2:t.x2*ie,y2:t.y2*ne,w:t.w*ie,h:t.h*ne}}function g(){var t=de.getFixed();t.w>M.minSelect[0]&&t.h>M.minSelect[1]?(fe.enableHandles(),fe.done()):fe.release(),me.setCursor(M.allowSelect?"crosshair":"default")}function v(t){if(M.disabled)return!1;if(!M.allowSelect)return!1;se=!0,H=a(B),fe.disableHandles(),me.setCursor("crosshair");var e=r(t);return de.setPressed(e),fe.update(),me.activateHandlers(_,g),ge.watchKeys(),t.stopPropagation(),t.preventDefault(),!1}function _(t){de.setCurrent(t),fe.update()}function b(){var e=t("<div></div>").addClass(s("tracker"));return t.browser.msie&&e.css({opacity:0,backgroundColor:"white"}),e}function w(t){X.removeClass().addClass(s("holder")).addClass(t)}function k(t,e){function i(){window.setTimeout(_,h)}var n=t[0]/ie,s=t[1]/ne,o=t[2]/ie,a=t[3]/ne;if(!oe){var r=de.flipCoords(n,s,o,a),l=de.getFixed(),c=[l.x,l.y,l.x2,l.y2],u=c,h=M.animationDelay,d=r[0]-c[0],p=r[1]-c[1],f=r[2]-c[2],m=r[3]-c[3],g=0,v=M.swingSpeed;x=u[0],y=u[1],o=u[2],a=u[3],fe.animMode(!0);var _=function(){return function(){g+=(100-g)/v,u[0]=x+g/100*d,u[1]=y+g/100*p,u[2]=o+g/100*f,u[3]=a+g/100*m,g>=99.8&&(g=100),100>g?(T(u),i()):(fe.done(),"function"==typeof e&&e.call(ve))}}();i()}}function C(t){T([t[0]/ie,t[1]/ne,t[2]/ie,t[3]/ne]),M.onSelect.call(ve,m(de.getFixed())),fe.enableHandles()}function T(t){de.setPressed([t[0],t[1]]),de.setCurrent([t[2],t[3]]),fe.update()}function E(){return m(de.getFixed())}function S(){return de.getFixed()}function P(t){l(t),A()}function j(){M.disabled=!0,fe.disableHandles(),fe.setCursor("default"),me.setCursor("default")}function D(){M.disabled=!1,A()}function O(){fe.done(),me.activateHandlers(null,null)}function L(){X.remove(),R.show(),t(e).removeData("Jcrop")}function N(t,e){fe.release(),j();var i=new Image;i.onload=function(){var n=i.width,s=i.height,o=M.boxWidth,a=M.boxHeight;B.width(n).height(s),B.attr("src",t),V.attr("src",t),f(B,o,a),U=B.width(),Y=B.height(),V.width(U).height(Y),le.width(U+2*re).height(Y+2*re),X.width(U).height(Y),pe.resize(U,Y),D(),"function"==typeof e&&e.call(ve)},i.src=t}function I(t,e,i){var n=e||M.bgColor;M.bgFade&&o()&&M.fadeTime&&!i?t.animate({backgroundColor:n},{queue:!1,duration:M.fadeTime}):t.css("backgroundColor",n)}function A(t){M.allowResize?t?fe.enableOnly():fe.enableHandles():fe.disableHandles(),me.setCursor(M.allowSelect?"crosshair":"default"),fe.setCursor(M.allowMove?"move":"default"),M.hasOwnProperty("trueSize")&&(ie=M.trueSize[0]/U,ne=M.trueSize[1]/Y),M.hasOwnProperty("setSelect")&&(C(M.setSelect),fe.done(),delete M.setSelect),pe.refresh(),M.bgColor!=ce&&(I(M.shade?pe.getShades():X,M.shade?M.shadeColor||M.bgColor:M.bgColor),ce=M.bgColor),ue!=M.bgOpacity&&(ue=M.bgOpacity,M.shade?pe.refresh():fe.setBgOpacity(ue)),J=M.maxSize[0]||0,Z=M.maxSize[1]||0,te=M.minSize[0]||0,ee=M.minSize[1]||0,M.hasOwnProperty("outerImage")&&(B.attr("src",M.outerImage),delete M.outerImage),fe.refresh()}var H,M=t.extend({},t.Jcrop.defaults),z=!1;t.browser.msie&&"6"===t.browser.version.split(".")[0]&&(z=!0),"object"!=typeof e&&(e=t(e)[0]),"object"!=typeof i&&(i={}),l(i);var F={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},R=t(e),q=!0;if("IMG"==e.tagName){if(0!=R[0].width&&0!=R[0].height)R.width(R[0].width),R.height(R[0].height);else{var W=new Image;W.src=R[0].src,R.width(W.width),R.height(W.height)}var B=R.clone().removeAttr("id").css(F).show();B.width(R.width()),B.height(R.height()),R.after(B).hide()}else B=R.css(F).show(),q=!1,null===M.shade&&(M.shade=!0);f(B,M.boxWidth,M.boxHeight);var U=B.width(),Y=B.height(),X=t("<div />").width(U).height(Y).addClass(s("holder")).css({position:"relative",backgroundColor:M.bgColor}).insertAfter(R).append(B);M.addClass&&X.addClass(M.addClass);var V=t("<div />"),Q=t("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),K=t("<div />").width("100%").height("100%").css("zIndex",320),G=t("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var t=de.getFixed();M.onDblClick.call(ve,t)}).insertBefore(B).append(Q,K);q&&(V=t("<img />").attr("src",B.attr("src")).css(F).width(U).height(Y),Q.append(V)),z&&G.css({overflowY:"hidden"});var J,Z,te,ee,ie,ne,se,oe,ae,re=M.boundary,le=b().width(U+2*re).height(Y+2*re).css({position:"absolute",top:n(-re),left:n(-re),zIndex:290}).mousedown(v),ce=M.bgColor,ue=M.bgOpacity;H=a(B);var he=function(){function t(){var t,e={},i=["touchstart","touchmove","touchend"],n=document.createElement("div");try{for(t=0;t<i.length;t++){var s=i[t];s="on"+s;var o=s in n;o||(n.setAttribute(s,"return;"),o="function"==typeof n[s]),e[i[t]]=o}return e.touchstart&&e.touchend&&e.touchmove}catch(a){return!1}}function e(){return M.touchSupport===!0||M.touchSupport===!1?M.touchSupport:t()}return{createDragger:function(t){return function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,M.disabled?!1:"move"!==t||M.allowMove?(se=!0,c(t,r(e)),e.stopPropagation(),e.preventDefault(),!1):!1}},newSelection:function(t){return t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,v(t)},isSupported:t,support:e()}}(),de=function(){function t(t){t=a(t),f=d=t[0],m=p=t[1]}function e(t){t=a(t),u=t[0]-f,h=t[1]-m,f=t[0],m=t[1]}function i(){return[u,h]}function n(t){var e=t[0],i=t[1];0>d+e&&(e-=e+d),0>p+i&&(i-=i+p),m+i>Y&&(i+=Y-(m+i)),f+e>U&&(e+=U-(f+e)),d+=e,f+=e,p+=i,m+=i}function s(t){var e=o();switch(t){case"ne":return[e.x2,e.y];case"nw":return[e.x,e.y];case"se":return[e.x2,e.y2];case"sw":return[e.x,e.y2]}}function o(){if(!M.aspectRatio)return l();var t,e,i,n,s=M.aspectRatio,o=M.minSize[0]/ie,a=M.maxSize[0]/ie,u=M.maxSize[1]/ne,h=f-d,g=m-p,v=Math.abs(h),y=Math.abs(g),_=v/y;return 0===a&&(a=10*U),0===u&&(u=10*Y),s>_?(e=m,i=y*s,t=0>h?d-i:i+d,0>t?(t=0,n=Math.abs((t-d)/s),e=0>g?p-n:n+p):t>U&&(t=U,n=Math.abs((t-d)/s),e=0>g?p-n:n+p)):(t=f,n=v/s,e=0>g?p-n:p+n,0>e?(e=0,i=Math.abs((e-p)*s),t=0>h?d-i:i+d):e>Y&&(e=Y,i=Math.abs(e-p)*s,t=0>h?d-i:i+d)),t>d?(o>t-d?t=d+o:t-d>a&&(t=d+a),e=e>p?p+(t-d)/s:p-(t-d)/s):d>t&&(o>d-t?t=d-o:d-t>a&&(t=d-a),e=e>p?p+(d-t)/s:p-(d-t)/s),0>t?(d-=t,t=0):t>U&&(d-=t-U,t=U),0>e?(p-=e,e=0):e>Y&&(p-=e-Y,e=Y),c(r(d,p,t,e))}function a(t){return t[0]<0&&(t[0]=0),t[1]<0&&(t[1]=0),t[0]>U&&(t[0]=U),t[1]>Y&&(t[1]=Y),[t[0],t[1]]}function r(t,e,i,n){var s=t,o=i,a=e,r=n;return t>i&&(s=i,o=t),e>n&&(a=n,r=e),[s,a,o,r]}function l(){var t,e=f-d,i=m-p;return J&&Math.abs(e)>J&&(f=e>0?d+J:d-J),Z&&Math.abs(i)>Z&&(m=i>0?p+Z:p-Z),ee/ne&&Math.abs(i)<ee/ne&&(m=i>0?p+ee/ne:p-ee/ne),te/ie&&Math.abs(e)<te/ie&&(f=e>0?d+te/ie:d-te/ie),0>d&&(f-=d,d-=d),0>p&&(m-=p,p-=p),0>f&&(d-=f,f-=f),0>m&&(p-=m,m-=m),f>U&&(t=f-U,d-=t,f-=t),m>Y&&(t=m-Y,p-=t,m-=t),d>U&&(t=d-Y,m-=t,p-=t),p>Y&&(t=p-Y,m-=t,p-=t),c(r(d,p,f,m))}function c(t){return{x:t[0],y:t[1],x2:t[2],y2:t[3],w:t[2]-t[0],h:t[3]-t[1]}}var u,h,d=0,p=0,f=0,m=0;return{flipCoords:r,setPressed:t,setCurrent:e,getOffset:i,moveOffset:n,getCorner:s,getFixed:o}}(),pe=function(){function e(t,e){f.left.css({height:n(e)}),f.right.css({height:n(e)})}function i(){return s(de.getFixed())}function s(t){f.top.css({left:n(t.x),width:n(t.w),height:n(t.y)}),f.bottom.css({top:n(t.y2),left:n(t.x),width:n(t.w),height:n(Y-t.y2)}),f.right.css({left:n(t.x2),width:n(U-t.x2)}),f.left.css({width:n(t.x)})}function o(){return t("<div />").css({position:"absolute",backgroundColor:M.shadeColor||M.bgColor}).appendTo(p)}function a(){d||(d=!0,p.insertBefore(B),i(),fe.setBgOpacity(1,0,1),V.hide(),r(M.shadeColor||M.bgColor,1),fe.isAwake()?c(M.bgOpacity,1):c(1,1))}function r(t,e){I(h(),t,e)}function l(){d&&(p.remove(),V.show(),d=!1,fe.isAwake()?fe.setBgOpacity(M.bgOpacity,1,1):(fe.setBgOpacity(1,1,1),fe.disableHandles()),I(X,0,1))}function c(t,e){d&&(M.bgFade&&!e?p.animate({opacity:1-t},{queue:!1,duration:M.fadeTime}):p.css({opacity:1-t}))}function u(){M.shade?a():l(),fe.isAwake()&&c(M.bgOpacity)}function h(){return p.children()}var d=!1,p=t("<div />").css({position:"absolute",zIndex:240,opacity:0}),f={top:o(),left:o().height(Y),right:o().height(Y),bottom:o()};return{update:i,updateRaw:s,getShades:h,setBgColor:r,enable:a,disable:l,resize:e,refresh:u,opacity:c}}(),fe=function(){function e(e){var i=t("<div />").css({position:"absolute",opacity:M.borderOpacity}).addClass(s(e));return Q.append(i),i}function i(e,i){var n=t("<div />").mousedown(p(e)).css({cursor:e+"-resize",position:"absolute",zIndex:i}).addClass("ord-"+e);return he.support&&n.bind("touchstart.jcrop",he.createDragger(e)),K.append(n),n}function o(t){var e=M.handleSize;return i(t,S++).css({opacity:M.handleOpacity}).width(e).height(e).addClass(s("handle"))}function a(t){return i(t,S++).addClass("jcrop-dragbar")}function r(t){var e;for(e=0;e<t.length;e++)j[t[e]]=a(t[e])}function l(t){var i,n;for(n=0;n<t.length;n++){switch(t[n]){case"n":i="hline";break;case"s":i="hline bottom";break;case"e":i="vline right";break;case"w":i="vline"}P[t[n]]=e(i)}}function c(t){var e;for(e=0;e<t.length;e++)$[t[e]]=o(t[e])}function u(t,e){M.shade||V.css({top:n(-e),left:n(-t)}),G.css({top:n(e),left:n(t)})}function h(t,e){G.width(t).height(e)}function d(){var t=de.getFixed();de.setPressed([t.x,t.y]),de.setCurrent([t.x2,t.y2]),f()}function f(t){return E?g(t):void 0}function g(t){var e=de.getFixed();h(e.w,e.h),u(e.x,e.y),M.shade&&pe.updateRaw(e),E||y(),t?M.onSelect.call(ve,m(e)):M.onChange.call(ve,m(e))}function v(t,e,i){(E||e)&&(M.bgFade&&!i?B.animate({opacity:t},{queue:!1,duration:M.fadeTime}):B.css("opacity",t))}function y(){G.show(),M.shade?pe.opacity(ue):v(ue,!0),E=!0}function _(){k(),G.hide(),M.shade?pe.opacity(1):v(1),E=!1,M.onRelease.call(ve)}function w(){D&&K.show()}function x(){return D=!0,M.allowResize?(K.show(),!0):void 0}function k(){D=!1,K.hide()}function C(t){oe===t?k():x()}function T(){C(!1),d()}var E,S=370,P={},$={},j={},D=!1;M.dragEdges&&t.isArray(M.createDragbars)&&r(M.createDragbars),t.isArray(M.createHandles)&&c(M.createHandles),M.drawBorders&&t.isArray(M.createBorders)&&l(M.createBorders),t(document).bind("touchstart.jcrop-ios",function(e){t(e.currentTarget).hasClass("jcrop-tracker")&&e.stopPropagation()});var O=b().mousedown(p("move")).css({cursor:"move",position:"absolute",zIndex:360});return he.support&&O.bind("touchstart.jcrop",he.createDragger("move")),Q.append(O),k(),{updateVisible:f,update:g,release:_,refresh:d,isAwake:function(){return E},setCursor:function(t){O.css("cursor",t)},enableHandles:x,enableOnly:function(){D=!0},showHandles:w,disableHandles:k,animMode:C,setBgOpacity:v,done:T}}(),me=function(){function e(){le.css({zIndex:450}),he.support&&t(document).bind("touchmove.jcrop",a).bind("touchend.jcrop",l),d&&t(document).bind("mousemove.jcrop",n).bind("mouseup.jcrop",s)}function i(){le.css({zIndex:290}),t(document).unbind(".jcrop")}function n(t){return u(r(t)),!1}function s(t){return t.preventDefault(),t.stopPropagation(),se&&(se=!1,h(r(t)),fe.isAwake()&&M.onSelect.call(ve,m(de.getFixed())),i(),u=function(){},h=function(){}),!1}function o(t,i){return se=!0,u=t,h=i,e(),!1}function a(t){return t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,n(t)}function l(t){return t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,s(t)}function c(t){le.css("cursor",t)}var u=function(){},h=function(){},d=M.trackDocument;return d||le.mousemove(n).mouseup(s).mouseout(s),B.before(le),{activateHandlers:o,setCursor:c}}(),ge=function(){function e(){M.keySupport&&(o.show(),o.focus())}function i(){o.hide()}function n(t,e,i){M.allowMove&&(de.moveOffset([e,i]),fe.updateVisible(!0)),t.preventDefault(),t.stopPropagation()}function s(t){if(t.ctrlKey||t.metaKey)return!0;ae=t.shiftKey?!0:!1;var e=ae?10:1;switch(t.keyCode){case 37:n(t,-e,0);break;case 39:n(t,e,0);break;case 38:n(t,0,-e);break;case 40:n(t,0,e);break;case 27:M.allowSelect&&fe.release();break;case 9:return!0}return!1}var o=t('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}),a=t("<div />").css({position:"absolute",overflow:"hidden"}).append(o);return M.keySupport&&(o.keydown(s).blur(i),z||!M.fixedSupport?(o.css({position:"absolute",left:"-20px"}),a.append(o).insertBefore(B)):o.insertBefore(B)),{watchKeys:e}}();he.support&&le.bind("touchstart.jcrop",he.newSelection),K.hide(),A(!0);var ve={setImage:N,animateTo:k,setSelect:C,setOptions:P,tellSelect:E,tellScaled:S,setClass:w,disable:j,enable:D,cancel:O,release:fe.release,destroy:L,focus:ge.watchKeys,getBounds:function(){return[U*ie,Y*ne]},getWidgetSize:function(){return[U,Y]},getScaleFactor:function(){return[ie,ne]},getOptions:function(){return M},ui:{holder:X,selection:G}};return t.browser.msie&&X.bind("selectstart",function(){return!1}),R.data("Jcrop",ve),ve},t.fn.Jcrop=function(e,i){var n;return this.each(function(){if(t(this).data("Jcrop")){if("api"===e)return t(this).data("Jcrop");t(this).data("Jcrop").setOptions(e)}else"IMG"==this.tagName?t.Jcrop.Loader(this,function(){t(this).css({display:"block",visibility:"hidden"}),n=t.Jcrop(this,e),t.isFunction(i)&&i.call(n)}):(t(this).css({display:"block",visibility:"hidden"}),n=t.Jcrop(this,e),t.isFunction(i)&&i.call(n))}),this},t.Jcrop.Loader=function(e,i,n){function s(){a.complete?(o.unbind(".jcloader"),t.isFunction(i)&&i.call(a)):window.setTimeout(s,50)}var o=t(e),a=o[0];o.bind("load.jcloader",s).bind("error.jcloader",function(){o.unbind(".jcloader"),t.isFunction(n)&&n.call(a)}),a.complete&&t.isFunction(i)&&(o.unbind(".jcloader"),i.call(a))},t.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:7,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery);