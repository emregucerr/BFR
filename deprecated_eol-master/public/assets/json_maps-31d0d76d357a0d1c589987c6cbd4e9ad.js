function goFullScreen(){currCenter=EoLMap.map.getCenter();var e=document.getElementById("gmap");document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?($("goFullText").innerHTML="Fullscreen OFF","Panel ON"==$("goPanelText").innerHTML?($("panel").style.height="500px",$("panel").style.width="200px",$("map-canvas").style.height="500px",$("map-canvas").style.width="700px"):($("panel").style.height="0px",$("panel").style.width="0px",$("map-canvas").style.height="500px",$("map-canvas").style.width="900px"),document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&(e.style.width="",document.webkitExitFullscreen())):($("goFullText").innerHTML="Fullscreen ON","Panel ON"==$("goPanelText").innerHTML?($("panel").style.height="100%",$("panel").style.width="17%",$("map-canvas").style.height="100%",$("map-canvas").style.width="83%"):($("panel").style.height="0px",$("panel").style.width="0px",$("map-canvas").style.height="100%",$("map-canvas").style.width="100%"),e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&(e.style.width="100%",e.style.height="100%",e.webkitRequestFullscreen())),google.maps.event.trigger(EoLMap.map,"resize"),EoLMap.map.setCenter(currCenter)}function exitHandler(){if(is_full_screen){if(!document.webkitIsFullScreen){$("goFullText").innerHTML="Fullscreen OFF";var e=document.getElementById("gmap");e.style.width=""}document.mozFullScreen&&($("goFullText").innerHTML="Fullscreen ON")}is_full_screen()||("Panel ON"==$("goPanelText").innerHTML?($("panel").style.height="500px",$("panel").style.width="200px",$("map-canvas").style.height="500px",$("map-canvas").style.width="700px"):($("map-canvas").style.height="500px",$("map-canvas").style.width="900px")),google.maps.event.trigger(EoLMap.map,"resize"),EoLMap.map.setCenter(currCenter)}function is_full_screen(){var e=document.getElementById("gmap");if(e.requestFullscreen);else if(e.msRequestFullscreen){if(1==document.msFullscreenElement)return!0}else if(e.mozRequestFullScreen){if(1==document.mozFullScreen)return!0}else if(e.webkitRequestFullscreen&&1==document.webkitIsFullScreen)return!0;return!1}function panelShowHide(){$("goPanelText").innerHTML="Panel ON"==$("goPanelText").innerHTML?"Panel OFF":"Panel ON",is_full_screen()?($("map-canvas").style.height="100%","Panel ON"==$("goPanelText").innerHTML?($("panel").style.width="17%",$("panel").style.height="100%",$("map-canvas").style.width="83%"):($("panel").style.width="0px",$("panel").style.height="0px",$("map-canvas").style.width="100%")):($("map-canvas").style.height="500px","Panel ON"==$("goPanelText").innerHTML?($("panel").style.width="200px",$("panel").style.height="500px",$("map-canvas").style.width="700px"):($("panel").style.width="0px",$("panel").style.height="0px",$("map-canvas").style.width="900px")),currCenter=EoLMap.map.getCenter(),google.maps.event.trigger(EoLMap.map,"resize"),EoLMap.map.setCenter(currCenter)}function record_history(){var e={};e.center=EoLMap.map.getCenter(),e.zoom=EoLMap.map.getZoom(),e.mapTypeId=EoLMap.map.getMapTypeId(),statuz.push(e),statuz_all.push(e),initial_map||(initial_map=e),currCenter=EoLMap.map.getCenter()}function CenterControl(e,t,i){var n=document.createElement("div");n.id="goBackUI",n.title="Go back one step",e.appendChild(n);var s=document.createElement("div");s.id="goBackText",s.innerHTML="Go Back",n.appendChild(s);var o=document.createElement("div");o.id="goNextUI",o.title="Move forward one step",e.appendChild(o);var a=document.createElement("div");a.id="goNextText",a.innerHTML="Move Next",o.appendChild(a);var r=document.createElement("div");r.id="goOrigUI",r.title="Back to original map",e.appendChild(r);var l=document.createElement("div");if(l.id="goOrigText",l.innerHTML="Initial Map",r.appendChild(l),1==i){var c=document.createElement("div");c.id="goRadioUI",c.title="Toggle Clustering",e.appendChild(c);var u=document.createElement("div");u.id="goRadioText",u.innerHTML="Clusters ON",c.appendChild(u),c.addEventListener("click",function(){clustersOnOff()})}var h=document.createElement("div");h.id="goPanelUI",h.title="Toggle Panel",e.appendChild(h);var d=document.createElement("div");d.id="goPanelText",d.innerHTML="Panel OFF",h.appendChild(d);var p=document.createElement("div");p.id="goFullUI",p.title="Toggle Fullscreen",e.appendChild(p);var f=document.createElement("div");f.id="goFullText",f.innerHTML="Fullscreen OFF",p.appendChild(f),n.addEventListener("click",function(){EoLMap.back()}),o.addEventListener("click",function(){EoLMap.next()}),r.addEventListener("click",function(){EoLMap.map.setOptions(initial_map),statuz=[],statuz_all=[]}),h.addEventListener("click",function(){panelShowHide()}),p.addEventListener("click",function(){goFullScreen()})}var currCenter="";document.addEventListener&&(document.addEventListener("webkitfullscreenchange",exitHandler,!1),document.addEventListener("mozfullscreenchange",exitHandler,!1),document.addEventListener("fullscreenchange",exitHandler,!1),document.addEventListener("MSFullscreenChange",exitHandler,!1)),EoLMap.back=function(){if(statuz.length>1){statuz.pop();var e=statuz.pop();EoLMap.map.setOptions(e),JSON.stringify(e)==JSON.stringify(initial_map)&&(statuz=[],statuz_all=[])}},EoLMap.next=function(){if(statuz_all.length>1){statuz_all.pop();var e=statuz_all.pop();EoLMap.map.setOptions(e),JSON.stringify(e)==JSON.stringify(initial_map)&&(statuz=[],statuz_all=[])}};