EOL||(EOL={}),EOL.pulsate_error=function(e){$(e).fadeIn("fast").fadeOut("fast").fadeIn("fast").fadeOut("fast").fadeIn("fast").delay(4e3).fadeOut(2e3)},EOL||(EOL={}),EOL.Text||(EOL.Text={}),$.extend(EOL.Text,{form:function(){return $("form#new_data_object, form.edit_data_object")},open_new_text_dialog:function(e){$("#insert_text_popup:visible").length>0?EOL.pulsate_error($(".multi_new_text_error")):EOL.Text.form().length>0&&-1==e.indexOf("edit")?EOL.Text.show_new_text_dialog():EOL.Text.create_new_text_dialog(e)},init_edit_links:function(){$("div.edit_text a").unbind("click"),$("div.edit_text a").on("click",function(){return EOL.Text.open_new_text_dialog($(this).attr("href")),!1})},show_new_text_dialog:function(){$("#insert_text_popup").slideDown(400,function(){$(window).scrollTop($("#insert_text_popup").offset().top-40)});try{EOL.Text.enable_form()}catch(e){}},create_new_text_dialog:function(e){$.ajax({url:e,success:function(e){-1!=$("#new_text_toc_text").attr("href").indexOf("toc_id=none")&&($(".cpc-content").children().not("#insert_text_popup").slideUp(400).delay(100).remove(),$.ajax({url:$("#new_text_toc_text").data("change_toc_url"),type:"post"})),$("#insert_text_popup .popup-content").html(e)},error:function(){$("#insert_text_popup .popup-content").html("<p>Sorry, there was an error.</p>")},complete:function(){EOL.Text.show_new_text_dialog()}})},update_add_links:function(e){$("li.add_text>a, div.add_text_button a").attr("href",e)},init_text_content_behaviors:function(){$("a.gloss-tooltip").tooltip(),$(".expand-text-attribution").unbind("click"),$(".expand-text-attribution").on("click",function(){return $("div."+$(this).attr("id").substring(4)+" div.credit").each(function(){$(this).fadeIn()}),$(this).fadeOut(),!1}),$("div.text_buttons div.comment_button a").unbind("click"),$("div.text_buttons div.comment_button a").on("click",function(){return data_object_id=$(this).data("data-object-id"),textCommentsDiv="text-comments-wrapper-"+data_object_id,textCommentsWrapper="#"+textCommentsDiv,$.ajax({url:$(this).attr("href"),data:{body_div_name:textCommentsDiv},success:function(e){$(textCommentsWrapper).html(e)},error:function(){$(textCommentsWrapper).html("<p>Sorry, there was an error.</p>")},complete:function(){$(textCommentsWrapper).slideDown()}}),!1}),$("div.text_buttons div.curate_button a").unbind("click"),$("div.text_buttons div.curate_button a").on("click",function(){return data_object_id=$(this).data("data-object-id"),textCuration="text-curation-"+data_object_id,textCurationWrapper="#text-curation-wrapper-"+data_object_id,$.ajax({url:$(this).attr("href"),data:{body_div_name:textCuration},success:function(e){$("#"+textCuration).html(e)},error:function(){$(textCurationWrapper).html("<p>Sorry, there was an error.</p>")},complete:function(){$(textCurationWrapper).slideDown()}}),!1}),$("li.add_text>a, div.add_text_button a").unbind("click"),$("li.add_text>a, div.add_text_button a").on("click",function(){return EOL.Text.open_new_text_dialog($(this).attr("href")),!1}),EOL.Text.init_edit_links()}}),$(document).ready(function(){EOL.Text.init_text_content_behaviors()});