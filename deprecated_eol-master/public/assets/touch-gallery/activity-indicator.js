/*!
 * NETEYE Activity Indicator jQuery Plugin
 *
 * Copyright (c) 2010 NETEYE GmbH
 * Licensed under the MIT license
 *
 * Author: Felix Gnass [fgnass at neteye dot de]
 * Version: @{VERSION}
 */
!function(e){function t(t,i){var n=document.createElementNS("http://www.w3.org/2000/svg",t||"svg");return i&&e.each(i,function(e,t){n.setAttributeNS(null,e,t)}),e(n)}e.fn.activity=function(t){return this.each(function(){var s=e(this),o=s.data("activity");if(o&&(clearInterval(o.data("interval")),o.remove(),s.removeData("activity")),t!==!1){t=e.extend({color:s.css("color")},e.fn.activity.defaults,t),o=i(s,t).css("position","absolute").prependTo(t.outside?"body":s);var a=s.outerHeight()-o.height(),r=s.outerWidth()-o.width(),l={top:"top"==t.valign?t.padding:"bottom"==t.valign?a-t.padding:Math.floor(a/2),left:"left"==t.align?t.padding:"right"==t.align?r-t.padding:Math.floor(r/2)},c=s.offset();t.outside?o.css({top:c.top+"px",left:c.left+"px"}):(l.top-=o.offset().top-c.top,l.left-=o.offset().left-c.left),o.css({marginTop:l.top+"px",marginLeft:l.left+"px"}),n(o,t.segments,Math.round(10/t.speed)/10),s.data("activity",o)}}),this},e.fn.activity.defaults={segments:12,space:3,length:7,width:4,speed:1.2,align:"center",valign:"center",padding:4},e.fn.activity.getOpacity=function(e,t){var i=e.steps||e.segments-1,n=void 0!==e.opacity?e.opacity:1/i;return 1-Math.min(t,i)*(1-n)/i};var i=function(){return e("<div>").addClass("busy")},n=function(){};if(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)if(i=function(i,n){for(var s=2*n.width+n.space,o=s+n.length+Math.ceil(n.width/2)+1,a=t().width(2*o).height(2*o),r=t("g",{"stroke-width":n.width,"stroke-linecap":"round",stroke:n.color}).appendTo(t("g",{transform:"translate("+o+","+o+")"}).appendTo(a)),l=0;l<n.segments;l++)r.append(t("line",{x1:0,y1:s,x2:0,y2:s+n.length,transform:"rotate("+360/n.segments*l+", 0, 0)",opacity:e.fn.activity.getOpacity(n,l)}));return e("<div>").append(a).width(2*o).height(2*o)},void 0!==document.createElement("div").style.WebkitAnimationName){var s={};n=function(e,t,i){if(!s[t]){for(var n="spin"+t,o="@-webkit-keyframes "+n+" {",a=0;t>a;a++){var r=Math.round(1e5/t*a)/1e3,l=Math.round(1e5/t*(a+1)-1)/1e3,c="% { -webkit-transform:rotate("+Math.round(360/t*a)+"deg); }\n";o+=r+c+l+c}o+="100% { -webkit-transform:rotate(100deg); }\n}",document.styleSheets[0].insertRule(o),s[t]=n}e.css("-webkit-animation",s[t]+" "+i+"s linear infinite")}}else n=function(e,t,i){var n=0,s=e.find("g g").get(0);e.data("interval",setInterval(function(){s.setAttributeNS(null,"transform","rotate("+ ++n%t*(360/t)+")")},1e3*i/t))};else{var o=e("<shape>").css("behavior","url(#default#VML)");if(e("body").append(o),o.get(0).adj){var a=document.createStyleSheet();e.each(["group","shape","stroke"],function(){a.addRule(this,"behavior:url(#default#VML);")}),i=function(t,i){for(var n=2*i.width+i.space,s=n+i.length+Math.ceil(i.width/2)+1,o=2*s,a=-Math.ceil(o/2),r=e("<group>",{coordsize:o+" "+o,coordorigin:a+" "+a}).css({top:a,left:a,width:o,height:o}),l=0;l<i.segments;l++)r.append(e("<shape>",{path:"m "+n+",0  l "+(n+i.length)+",0"}).css({width:o,height:o,rotation:360/i.segments*l+"deg"}).append(e("<stroke>",{color:i.color,weight:i.width+"px",endcap:"round",opacity:e.fn.activity.getOpacity(i,l)})));return e("<group>",{coordsize:o+" "+o}).css({width:o,height:o,overflow:"hidden"}).append(r)},n=function(e,t,i){var n=0,s=e.get(0);e.data("interval",setInterval(function(){s.style.rotation=++n%t*(360/t)},1e3*i/t))}}e(o).remove()}}(jQuery);