var wgOggPlayer={detectionDone:!1,msie:!1,safari:!1,opera:!1,mozilla:!1,players:["videoElement","cortado","quicktime-mozilla","quicktime-activex","vlc-mozilla","vlc-activex","totem","kmplayer","kaffeine","mplayerplug-in","oggPlugin"],clientSupports:{thumbnail:!0},mimeTypes:{"quicktime-mozilla":"video/quicktime","quicktime-activex":"video/quicktime","vlc-mozilla":"application/x-vlc-plugin",oggPlugin:"application/ogg",totem:"application/ogg",kmplayer:"application/ogg",kaffeine:"application/ogg","mplayerplug-in":"application/ogg"},savedThumbs:{},qtTimers:{},defaultMsg:{"ogg-player-totem":"Totem","ogg-player-kmplayer":"KMPlayer","ogg-player-kaffeine":"Kaffeine","ogg-player-mplayerplug-in":"mplayerplug-in"},msg:{},cortadoUrl:"",extPathUrl:"",showPlayerSelect:!0,controlsHeightGuess:20,init:function(e,t){if(elt=document.getElementById(t.id),!(t.id in this.savedThumbs)){var i=document.createDocumentFragment();for(s=0;s<elt.childNodes.length;s++)i.appendChild(elt.childNodes.item(s).cloneNode(!0));this.savedThumbs[t.id]=i}if(this.detect(),!e){var n=this.getCookie("ogg_player");n&&"thumbnail"!=n&&(e=n)}if(this.clientSupports[e]||(e=!1),!e)for(var s=0;s<this.players.length;s++)if(this.clientSupports[this.players[s]]){e=this.players[s];break}switch(elt.innerHTML="",e){case"videoElement":this.embedVideoElement(elt,t);break;case"oggPlugin":case"kaffeine":case"totem":case"kmplayer":case"mplayerplug-in":this.embedOggPlugin(elt,t,e);break;case"vlc-mozilla":this.embedVlcPlugin(elt,t);break;case"vlc-activex":this.embedVlcActiveX(elt,t);break;case"cortado":this.embedCortado(elt,t);break;case"quicktime-mozilla":case"quicktime-activex":this.embedQuicktimePlugin(elt,t,e);break;case"thumbnail":default:if(t.id in this.savedThumbs?elt.appendChild(this.savedThumbs[t.id].cloneNode(!0)):elt.appendChild(document.createTextNode("Missing saved thumbnail for "+t.id)),"thumbnail"!=e){var o=document.createElement("div");o.className="ogg-player-options",o.style.cssText="width: "+(t.width-10)+"px;",o.innerHTML=this.msg["ogg-no-player"],elt.appendChild(o),e="none"}}if("thumbnail"!=e){var a=this.makeOptionsBox(e,t),r=this.makeOptionsLink(t.id),o=document.createElement("div");o.appendChild(a),o.appendChild(r),elt.appendChild(o)}},debug:function(){},supportedMimeType:function(e){for(var t=navigator.plugins.length;t-->0;){var i=navigator.plugins[t];if("undefined"!=typeof i[e])return!0}return!1},detect:function(){if(!this.detectionDone){this.detectionDone=!0,this.msie="Microsoft Internet Explorer"==navigator.appName,this.mozilla="Netscape"==navigator.appName,this.opera="Opera"==navigator.appName,this.safari=navigator.vendor&&"Apple"==navigator.vendor.substr(0,5),this.konqueror="Konqueror"==navigator.appName;var e=navigator.javaEnabled(),t=this.opera;if(t&&e&&(this.clientSupports.cortado=!0),this.konqueror&&(e=!1),this.testActiveX("VideoLAN.VLCPlugin.2")&&(this.clientSupports["vlc-activex"]=!0),e&&this.testActiveX("JavaWebStart.isInstalled")&&(this.clientSupports.cortado=!0),this.testActiveX("QuickTimeCheckObject.QuickTimeCheck.1")&&(this.clientSupports["quicktime-activex"]=!0),"object"==typeof HTMLVideoElement||"function"==typeof HTMLVideoElement)if(wgOggPlayer.safari)try{var i=document.createElement("video");i.canPlayType&&"probably"==i.canPlayType('video/ogg;codecs="theora,vorbis"')?this.clientSupports.videoElement=!0:this.supportedMimeType("video/ogg")&&(this.clientSupports.videoElement=!0)}catch(n){}else this.clientSupports.videoElement=!0;if(navigator.mimeTypes&&0!=navigator.mimeTypes.length){var s,o,a={},r={},l={};for(o=0;o<navigator.mimeTypes.length;o++){var c=navigator.mimeTypes[o],u=c.type,h=u.indexOf(";");h>-1&&(u=u.substr(0,h));var d=c.enabledPlugin,p=d&&d.name?d.name:"",f=d&&d.filename?d.filename:"";s="",e&&"application/x-java-applet"==u?(this.clientSupports.cortado=!0,s=""):f.indexOf("libtotem")>-1?s="totem":f.indexOf("libkmplayerpart")>-1?("Windows Media Player Plugin"==p||"QuickTime Plug-in"==p)&&(s="kmplayer"):f.indexOf("kaffeineplugin")>-1?s="kaffeine":p.indexOf("mplayerplug-in")>-1?s="mplayerplug-in":f.indexOf("mplayerplug-in-qt")>-1?s="":p.indexOf("QuickTime Plug-in")>-1?s="quicktime-mozilla":"vlc multimedia plugin"==p.toLowerCase()?s="vlc-mozilla":"application/ogg"==u&&(s="oggPlugin"),this.konqueror&&"vlc-mozilla"==s&&(s=""),s in a||(a[s]={}),a[s][u]=!0,u in r||(r[u]={},l[u]=0),s in r[u]||(r[u][s]=!0,l[u]++)}for(o=0;o<this.players.length;o++)if(s=this.players[o],s in a){var m=this.mimeTypes[s];if(m in l&&1==l[m]&&m in a[s])this.debug(s+" -> "+m),this.clientSupports[s]=!0;else{for(var u in a[s])if(1==l[u]){this.mimeTypes[s]=u,this.clientSupports[s]=!0,this.debug(s+" => "+u);break}s in this.clientSupports||(a[s].length>0?this.debug("No unique MIME type for "+s):this.debug("No types for player "+s))}}}}},testActiveX:function(e){if(this.mozilla)return!1;var t=!0;try{{new ActiveXObject(""+e)}}catch(i){t=!1}return t},addOption:function(e,t,i,n){var s=document.createElement("option");s.value=t,s.appendChild(document.createTextNode(i)),n&&(s.selected=!0),e.appendChild(s)},hx:function(e){return"String"!=typeof e&&(e=e.toString()),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},hq:function(e){return'"'+this.hx(e)+'"'},getMsg:function(e){return e in this.msg?this.msg[e]:e in this.defaultMsg?this.defaultMsg[e]:"["+e+"]"},makeOptionsBox:function(e,t){var i,n,s,o,a,r;i=document.createElement("div"),i.style.cssText="width: "+(t.width-10)+"px; display: none;",i.className="ogg-player-options",i.id=t.id+"_options_box",i.align="center",o=document.createElement("ul"),t.linkUrl&&(a=document.createElement("li"),s=document.createElement("a"),s.href=t.linkUrl,s.appendChild(document.createTextNode(this.msg["ogg-desc-link"])),a.appendChild(s),o.appendChild(a)),a=document.createElement("li"),s=document.createElement("a"),s.href=t.videoUrl,s.appendChild(document.createTextNode(this.msg["ogg-download"])),a.appendChild(s),o.appendChild(a),i.appendChild(o),n=document.createElement("p"),n.appendChild(document.createTextNode(this.msg["ogg-use-player"])),i.appendChild(n),o=document.createElement("ul");for(var l=0;l<this.players.length+1;l++){var c,u;if(l==this.players.length)c="thumbnail",u=t.isVideo?"ogg-player-thumbnail":"ogg-player-soundthumb";else{if(c=this.players[l],!this.clientSupports[c])continue;u="ogg-player-"+c}if(a=document.createElement("li"),c==e){var h=document.createElement("strong");h.appendChild(document.createTextNode(this.getMsg(u)+" "+this.msg["ogg-player-selected"])),a.appendChild(h)}else s=document.createElement("a"),s.href='javascript:void("'+c+'")',s.onclick=this.makePlayerFunction(c,t),s.appendChild(document.createTextNode(this.getMsg(u))),a.appendChild(s);o.appendChild(a)}return i.appendChild(o),div2=document.createElement("div"),div2.style.cssText="text-align: center;",r=document.createElement("button"),r.appendChild(document.createTextNode(this.msg["ogg-dismiss"])),r.onclick=this.makeDismissFunction(t.id),div2.appendChild(r),i.appendChild(div2),i},makeOptionsLink:function(e){var t=document.createElement("a");return t.href='javascript:void("options")',t.id=e+"_options_link",t.onclick=this.makeDisplayOptionsFunction(e),t.appendChild(document.createTextNode(this.msg["ogg-more"])),t},setCssProperty:function(e,t,i){var n=new RegExp(t+":[^;](;|$)");e.style.cssText.search(n)>-1?e.style.cssText=e.style.cssText.replace(n,t+":"+i+"$1"):""==e.style.cssText?e.style.cssText=t+":"+i+";":e.style.cssText+=";"==e.style.cssText[e.style.cssText.length-1]?t+":"+i+";":";"+t+":"+i+";"},makeDismissFunction:function(e){var t=this;return function(){var i=document.getElementById(e+"_options_link"),n=document.getElementById(e+"_options_box");t.setCssProperty(i,"display","inline"),t.setCssProperty(n,"display","none")}},makeDisplayOptionsFunction:function(e){var t=this;return function(){var i=document.getElementById(e+"_options_link"),n=document.getElementById(e+"_options_box");t.setCssProperty(i,"display","none"),t.setCssProperty(n,"display","block")}},makePlayerFunction:function(e,t){var i=this;return function(){if("thumbnail"!=e){var n=6048e5;i.setCookie("ogg_player",e,n,!1,!1,!1,!1)}i.init(e,t)}},newButton:function(e,t,i){var n=document.createElement("input");return n.type="image",n.src=this.extPathUrl+"/"+t,n.alt=n.value=n.title=this.msg[e],n.onclick=i,n},newPlayButton:function(e){return this.newButton("ogg-play","play.png",function(){e.play()})},newPauseButton:function(e){return this.newButton("ogg-pause","pause.png",function(){e.pause()})},newStopButton:function(e){return this.newButton("ogg-stop","stop.png",function(){e.stop()})},embedVideoElement:function(e,t){var i=e.id+"_obj",n=t.isVideo?"video":"audio",s="<div><"+n+" id="+this.hq(i)+" width="+this.hq(t.width)+" height="+this.hq(t.height>0?t.height:this.controlsHeightGuess)+" src="+this.hq(t.videoUrl)+" autoplay";this.safari||(s+=" controls"),s+=" ></"+n+"></div>",e.innerHTML=s},embedOggPlugin:function(e,t,i){var n=e.id+"_obj";e.innerHTML+="<div><object id="+this.hq(n)+" type='"+this.mimeTypes[i]+"' width="+this.hq(t.width)+" height="+this.hq(t.height+this.controlsHeightGuess)+" data="+this.hq(t.videoUrl)+"></object></div>"},embedVlcPlugin:function(e,t){var i=e.id+"_obj";e.innerHTML+="<div><object id="+this.hq(i)+" type='"+this.mimeTypes["vlc-mozilla"]+"' width="+this.hq(t.width)+" height="+this.hq(t.height)+" data="+this.hq(t.videoUrl)+"></object></div>";var n=document.getElementById(i),s=document.createElement("div");s.appendChild(this.newPlayButton(n)),s.appendChild(this.newPauseButton(n)),s.appendChild(this.newStopButton(n)),e.appendChild(s)},embedVlcActiveX:function(e,t){var i=e.id+"_obj",n="<div><object id="+this.hq(i)+' classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921" codebase="http://downloads.videolan.org/pub/videolan/vlc/latest/win32/axvlc.cab#Version=0,8,6,0" width='+this.hq(t.width)+" height="+this.hq(t.height)+' style="width: '+this.hx(t.width)+"px; height: "+this.hx(t.height)+'px;"><param name="mrl" value='+this.hq(t.videoUrl)+"/></object></div>";e.innerHTML+=n;var s=document.getElementById(i);t.width&&t.height&&(s.width=t.width,s.height=t.height,s.style.width=t.width+"px",s.style.height=t.height+"px");var o=document.createElement("div");o.appendChild(this.newButton("ogg-play","play.png",function(){s.playlist.play()})),o.appendChild(this.newButton("ogg-stop","stop.png",function(){s.playlist.stop()})),e.appendChild(o)},embedCortado:function(e,t){var i=18,n=t.height+i,s='<applet code="com.fluendo.player.Cortado.class"       width='+this.hq(t.width)+"      height="+this.hq(n)+"      archive="+this.hq(this.cortadoUrl)+'>  <param name="url"  value='+this.hq(t.videoUrl)+'/>  <param name="duration"  value='+this.hq(t.length)+'/>  <param name="seekable"  value="true"/>  <param name="autoPlay" value="true"/>  <param name="showStatus"  value="show"/>  <param name="showSpeaker" value="false"/>  <param name="statusHeight"  value="'+i+'"/></applet>';if(this.mozilla){var o=document.createElement("iframe");o.setAttribute("width",t.width),o.setAttribute("height",n),o.setAttribute("scrolling","no"),o.setAttribute("frameborder",0),o.setAttribute("marginWidth",0),o.setAttribute("marginHeight",0),e.appendChild(o);var a=o.contentDocument;a.open(),a.write("<html><body>"+s+"</body></html>"),a.close()}else e.innerHTML="<div>"+s+"</div>"},embedQuicktimePlugin:function(e,t,i){var n=e.id+"_obj",s=16,o="";"quicktime-activex"==i&&(o='classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B"'),e.innerHTML+="<div><object id="+this.hq(n)+" type='"+this.mimeTypes[i]+"' width="+this.hq(t.width)+" height="+this.hq(t.height+s)+" data="+this.hq(this.extPathUrl+"/null_file.mov")+" "+o+"><param name='SCALE' value='Aspect'/><param name='AUTOPLAY' value='True'/><param name='src' value="+this.hq(this.extPathUrl+"/null_file.mov")+"/><param name='QTSRC' value="+this.hq(t.videoUrl)+"/></object></div>";this.qtTimers[t.id]=window.setInterval(this.makeQuickTimePollFunction(t),500)},makeQuickTimePollFunction:function(e){var t=this;return function(){var i=document.getElementById(e.id),n=e.id+"_obj",s=document.getElementById(n);if(i&&s){var o=!1,a=!1;try{o=s.GetComponentVersion("imdc","XiTh","Xiph"),a=!0}catch(r){}if(a){if(window.clearInterval(t.qtTimers[e.id]),!o||"0.0"==o){var l=document.createElement("div");l.className="ogg-player-options",l.style.cssText="width:"+(e.width-10)+"px;",l.innerHTML=t.getMsg("ogg-no-xiphqt");var c=document.getElementById(e.id+"_options_box");c?i.insertBefore(l,c.parentNode):i.appendChild(l)}t.setParam(s,"AUTOPLAY","False")}}}},addParam:function(e,t,i){var n=document.createElement("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)},setParam:function(e,t,i){for(var n=e.getElementsByTagName("param"),s=0;s<n.length;s++)if(n[s].name.toLowerCase()==t.toLowerCase())return n[s].value=i,void 0;this.addParam(e,t,i)},setCookie:function(e,t,i,n,s,o){var a=!1;i&&(a=new Date,a.setTime(a.getTime()+i)),document.cookie=e+"="+escape(t)+(a?"; expires="+a.toGMTString():"")+(n?"; path="+n:"")+(s?"; domain="+s:"")+(o?"; secure":"")},getCookie:function(e){var t=document.cookie.match(e+"=(.*?)(;|$)");return t?unescape(t[1]):!1}};wgOggPlayer.msg={"ogg-play":"Play","ogg-pause":"Pause","ogg-stop":"Stop","ogg-no-player":'Sorry, your system does not appear to have any supported player software.\nPlease <a href="http://www.mediawiki.org/wiki/Extension:OggHandler/Client_download">download a player</a>.',"ogg-player-videoElement":"Native browser support","ogg-player-oggPlugin":"Browser plugin","ogg-player-cortado":"Cortado (Java)","ogg-player-vlc-mozilla":"VLC","ogg-player-vlc-activex":"VLC (ActiveX)","ogg-player-quicktime-mozilla":"QuickTime","ogg-player-quicktime-activex":"QuickTime (ActiveX)","ogg-player-totem":"Totem","ogg-player-kaffeine":"Kaffeine","ogg-player-kmplayer":"KMPlayer","ogg-player-mplayerplug-in":"mplayerplug-in","ogg-player-thumbnail":"Still image only","ogg-player-selected":"(selected)","ogg-use-player":"Use player:","ogg-more":"More...","ogg-download":"Download file","ogg-desc-link":"About this file","ogg-dismiss":"Close","ogg-player-soundthumb":"No player","ogg-no-xiphqt":'You do not appear to have the XiphQT component for QuickTime.\nQuickTime cannot play Ogg files without this component.\nPlease <a href="http://www.mediawiki.org/wiki/Extension:OggHandler/Client_download">download XiphQT</a> or choose another player.'},wgOggPlayer.cortadoUrl="http://upload.wikimedia.org/jars/cortado.jar",wgOggPlayer.extPathUrl="http://en.wikipedia.org/w/extensions/OggHandler";